#!/bin/bash -l

#$ -cwd
#$ -S /bin/bash
#$ -l tmem=16G
#$ -t 1-1
#$ -l h_rt=01:00:00
#$ -o /SAN/intelsys/rclearn/when-do-reading-comprehension-models-learn/array.out
#$ -e /SAN/intelsys/rclearn/when-do-reading-comprehension-models-learn/array.err
#$ -l gpu=true

hostname
date

# Activate conda environment
conda activate rclearn

export LANG="en_US.utf8"
export LANGUAGE="en_US:en"

cd /SAN/intelsys/rclearn/when-do-reading-comprehension-models-learn

test $SGE_TASK_ID -eq 1 && sleep 10 && python src/models/run_qa.py \
	--model_name_or_path /SAN/intelsys/rclearn/when-do-reading-comprehension-models-learn/models/albert-xlarge-v2-squadv2-wu=100-lr=3e5-bs=32-msl=384-seed=27/checkpoint-1 \
	--do_predict \
	--test_file /SAN/intelsys/rclearn/when-do-reading-comprehension-models-learn/src/analysis/checklist/squad_ans.json \
	--per_device_eval_batch_size 128 \
	--output_dir temp_outputs \
	--overwrite_output_dir \
	--overwrite_cache \
	--report_to none \
	> logs/checklist/albert-xlarge-v2-squadv2-wu=100-lr=3e5-bs=32-msl=384-seed=27-checkpoint=1.log 2>&1


date
